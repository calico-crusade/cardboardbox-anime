<cba-container [loading]="loading" [error]="error" [requires-login]="true" [ifs-enabled]="true" (ifs)="onScroll()" flex-flow="column">
    <header>
        <div class="select-list">
            <a *ngFor="let state of states" [routerLink]="state.routes" 
                routerLinkActive="active">
                {{ state.text }}<span> ({{ total }})</span>
            </a>
            <button (click)="filter()"><cba-icon>search</cba-icon></button>
        </div>
    </header>
    <main>
        <cba-manga-card *ngFor="let manga of records" [data]="manga"></cba-manga-card>
    </main>
    <div class="float-icons">
        <button class="float-icon" (click)="openFilters()">
            <cba-icon>filter_alt</cba-icon>
        </button>
        <button class="float-icon" (click)="filter()">
            <cba-icon>search</cba-icon>
        </button>
    </div>
</cba-container>

<cba-popup #popup>
    <div class="links">
        <a *ngFor="let state of states" [routerLink]="state.routes" 
            routerLinkActive="active" (click)="closeFilters()">
            {{ state.text }}<span> ({{ total }})</span>
        </a>
    </div>
</cba-popup>

<cba-manga-search-filters [override-state]="state" [route]="current?.routes || []"></cba-manga-search-filters>